{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const fetchPhotos = async (searchedQuery, page) => {\n  try {\n    const axiosOptions = {\n      params: {\n        key: '45695124-2521d690be74d3f32382c65dc',\n        q: searchedQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    };\n\n    const response = await axios.get('/', axiosOptions);\n\n    return response;\n  } catch (error) {\n    console.error('Error fetching photos:', error);\n    throw error;\n  }\n};\n","export const createGalleryCardTemplate = imgInfo => {\n    return `\n    <li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n      <img \n      class=\"gallery-img\" \n      src=\"${imgInfo.webformatURL}\" \n      alt=\"${imgInfo.tags}\" />\n    </a>\n  <div class=\"wrapper\">\n    <ul class=\"img-content-wrapper\">\n      <li class=\"text-info\">\n        Likes<span class=\"number\">${imgInfo.likes}</span>\n      </li>\n      <li class=\"text-info\">\n        Views<span class=\"number\">${imgInfo.views}</span>\n      </li>\n      <li class=\"text-info\">\n        Comments<span class=\"number\">${imgInfo.comments}</span>\n      </li>\n      <li class=\"text-info\">\n        Downloads<span class=\"number\">${imgInfo.downloads}</span>\n      </li>\n    </ul>\n  </div>\n</li>\n    `;\n  };\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nhideLoader();\nsetTimeout(hideLoader, 300);\n\nlet imageGallery = new SimpleLightbox('.gallery a', {\n  navText:  ['<','>'],\n  captionsData: 'alt',\n  captionDelay: 250,\n  enableKeyboard: true,\n});\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault(); \n\n  galleryEl.innerHTML = '';\n  loadMoreBtnEl.classList.add('is-hidden-load');\n  \n  searchedValue = searchFormEl.elements.user_query.value.trim();\n\n\n  if (searchedValue === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Input field must not be empty',\n      position: 'bottomCenter',\n    });\n    return;\n  }\n\n  try {\n    showLoader();\n    currentPage = 1;\n\n    \n    const response = await fetchPhotos(searchedValue, currentPage);\n\n    if (response.data.total === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomCenter',\n      });\n      return;\n    }\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n\n    galleryEl.innerHTML = galleryCardsTemplate;\n\n\n    const galleryCardEl = galleryEl.querySelector('li');\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n    imageGallery.refresh();\n\n   \n    let totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPage < totalPages) {\n      loadMoreBtnEl.classList.remove('is-hidden-load');\n    } else {\n      iziToast.info({\n        title: 'Info',\n        message: 'We are sorry, but you have reached the end of search results',\n      });\n    }\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n\n  searchFormEl.reset(); \n};\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    showLoader();\n    currentPage++;\n\n    const response = await fetchPhotos(searchedValue, currentPage);\n  \n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n   \n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    imageGallery.refresh();\n\n    let totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPage >= totalPages) {\n      loadMoreBtnEl.classList.add('is-hidden-load');\n      iziToast.info({\n        position: 'topCenter',\n        message: 'We are sorry, but you have reached the end of search results',\n      });\n    }\n  } catch (err){\n    iziToast.error({\n      message:\n        'Sorry, there was an error loading the images. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["axios","fetchPhotos","searchedQuery","page","axiosOptions","error","createGalleryCardTemplate","imgInfo","searchFormEl","galleryEl","loader","loadMoreBtnEl","currentPage","searchedValue","cardHeight","showLoader","hideLoader","imageGallery","SimpleLightbox","onSearchFormSubmit","event","iziToast","response","galleryCardsTemplate","imgDetails","totalPages","err","onLoadMoreBtnClick"],"mappings":"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"}